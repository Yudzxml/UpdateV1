<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YUDZXML Update Admin Panel</title>

<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
/* --- GLOBAL RESET --- */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #0f172a;
  color: #f8fafc;
  padding: 30px 15px;
  text-align: center;
}

/* --- CARD --- */
.card {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 16px;
  padding: 30px 20px;
  max-width: 500px;
  width: 100%;
  margin: auto;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
  transition: transform 0.2s;
}

.card:hover {
  transform: translateY(-5px);
}

h2 {
  margin-bottom: 20px;
  font-weight: 600;
  font-size: 1.6rem;
}

/* --- FORM INPUT --- */
form .input-group {
  position: relative;
  margin-bottom: 15px;
}

form input,
form select {
  width: 100%;
  padding: 12px 40px 12px 12px;
  border-radius: 10px;
  border: none;
  font-size: 15px;
  background: rgba(255, 255, 255, 0.1);
  color: #f8fafc;
  outline: none;
  transition: background 0.2s, box-shadow 0.2s;
}

form input:focus,
form select:focus {
  background: rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 8px #3b82f6;
}

/* --- ICONS INSIDE INPUT --- */
.input-group i {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: #94a3b8;
  pointer-events: none;
}

/* --- BUTTON --- */
button {
  width: 100%;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: #3b82f6;
  color: white;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: background 0.3s, transform 0.2s;
}

button:hover {
  background: #2563eb;
  transform: translateY(-2px);
}

/* --- RESULT AREA --- */
#result {
  margin-top: 20px;
  font-size: 14px;
  text-align: left;
  word-wrap: break-word;
  background: rgba(255, 255, 255, 0.05);
  padding: 12px;
  border-radius: 10px;
}

/* --- MEDIA QUERIES UNTUK MOBILE --- */
@media (max-width: 600px) {
  body {
    padding: 15px 10px;
  }

  .card {
    padding: 20px 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  h2 {
    font-size: 1.3rem;
  }

  form input,
  form select {
    font-size: 14px;
    padding: 10px 35px 10px 10px; /* padding icon lebih kecil */
  }

  .input-group i {
    right: 10px; /* icon lebih dekat ke kanan */
  }

  button {
    font-size: 15px;
    padding: 10px;
  }

  #result {
    font-size: 13px;
    padding: 10px;
  }
}
</style>
</head>
<body>

<div class="card">
  <h2><i class="fa-solid fa-gears"></i> YUDZXML UPDATE SCRIPT</h2>
  <form id="updateForm">
    <div class="input-group">
      <input type="text" id="author" placeholder="Author" required />
      <i class="fa-solid fa-user"></i>
    </div>
    <div class="input-group">
      <input type="text" id="title" placeholder="Title" required />
      <i class="fa-solid fa-heading"></i>
    </div>
    <div class="input-group">
      <input type="text" id="version" placeholder="Version" required />
      <i class="fa-solid fa-code-branch"></i>
    </div>
    <div class="input-group">
      <input type="text" id="keyScript" placeholder="Key Script" required />
      <i class="fa-solid fa-key"></i>
    </div>
    <div class="input-group">
      <select id="versionType" required>
        <option value="">-- Pilih Versi --</option>
        <option value="full">Full</option>
        <option value="lite">Lite</option>
      </select>
      <i class="fa-solid fa-list"></i>
    </div>
    <div class="input-group">
      <input type="file" id="file" accept=".zip" required />
      <i class="fa-solid fa-file-zipper"></i>
    </div>
    <button type="submit"><i class="fa-solid fa-upload"></i> Upload Update</button>
  </form>
  <pre id="result"></pre>
</div>

<script>
  const form = document.getElementById("updateForm");
  const result = document.getElementById("result");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const author = document.getElementById("author").value;
    const title = document.getElementById("title").value;
    const version = document.getElementById("version").value;
    const keyScript = document.getElementById("keyScript").value;
    const versionType = document.getElementById("versionType").value;
    const file = document.getElementById("file").files[0];

    if (!file) {
      result.textContent = "Harap pilih file update!";
      return;
    }
    if (!versionType) {
      result.textContent = "Harap pilih versi update (Full/Lite)!";
      return;
    }

    const formData = new FormData();
    formData.append("author", author);
    formData.append("title", title);
    formData.append("version", version);
    formData.append("keyScript", keyScript);
    formData.append("versionType", versionType);
    formData.append("file", file);

    result.textContent = "Mengupload...";

    try {
      const res = await fetch("/api/update", {
        method: "POST",
        headers: {
          "x-admin-key": "UPDATE-X7BOTZ-MD-YUDZXML"
        },
        body: formData
      });

      const data = await res.json();
      result.textContent = JSON.stringify(data, null, 2);
    } catch (err) {
      result.textContent = "Error: " + err.message;
    }
  });
</script>

</body>
</html>